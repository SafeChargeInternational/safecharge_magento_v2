<?php
/**
 * @var Magento\Payment\Block\Adminhtml\Transparent\Form $block
 */

$code       = $block->escapeHtml($block->getMethodCode());

$ccType     = $block->getInfoData('cc_type');
$ccExpMonth = $block->getInfoData('cc_exp_month');
$ccExpYear  = $block->getInfoData('cc_exp_year');
?>

<fieldset class="admin__fieldset payment-method"
          id="payment_form_<?= /* @noEscape */ $code; ?>"
          style="display:none;">

    <div class="admin__field _required">
        <label for="<?= /* @noEscape */ $code; ?>_cc_type"
               class="admin__field-label">
            <span><?= $block->escapeHtml(__('Credit Card Type')); ?></span>
        </label>
        
        <div class="admin__field-control">
            <select id="<?= /* @noEscape */ $code; ?>_cc_type"
                    name="payment[cc_type]"
                    class="required-entry validate-cc-type-select
                    admin__control-select">
                <option value=""></option>
                <?php $availableTypes = $block->getCcAvailableTypes() ?>
                <?php foreach ($availableTypes as $typeCode => $typeName): ?>
                    <?php
                    $selected = $typeCode === $ccType
                        ? 'selected="selected"'
                        : '';
                    ?>
                    <option value="<?= $block->escapeHtml($typeCode); ?>"
                            <?= /* @noEscape */ $selected ?>>
                        <?= $block->escapeHtml($typeName); ?>
                    </option>
                <?php endforeach; ?>
            </select>
        </div>
    </div>

    <div class="admin__field _required">
        <label for="<?= /* @noEscape */ $code; ?>_cc_number"
               class="admin__field-label">
            <span><?= $block->escapeHtml(__('Card Number')); ?></span>
        </label>

        <div class="admin__field-control">
            <input type="tel" id="<?= /* @noEscape */ $code; ?>_cc_number"
                   name="payment[cc_number]"
                   class="input-text required-entry validate-cc-number admin__control-text"
                   maxlength="19"
                   value="<?= /* @noEscape */ $block->getInfoData('cc_number'); ?>"/>
        </div>
    </div>

    <div class="admin__field _required">
        <label for="<?= /* @noEscape */ $code; ?>_expiration"
               class="admin__field-label">
            <span><?= $block->escapeHtml(__('Expiration Date')); ?></span>
        </label>

        <div class="admin__field-control">
            <select id="<?= /* @noEscape */ $code; ?>_expiration"
                    name="payment[cc_exp_month]"
                    class="validate-cc-exp required-entry admin__control-select
                    admin__control-select-month">
                <?php foreach ($block->getCcMonths() as $k => $v): ?>
                    <?php
                    $selected = $k === $ccExpMonth
                        ? 'selected="selected"'
                        : '';
                    ?>
                    <option value="<?= $block->escapeHtml($k); ?>"
                            <?= /* @noEscape */ $selected ?>>
                        <?= $block->escapeHtml($v); ?>
                    </option>
                <?php endforeach; ?>
            </select>
            <select id="<?= /* @noEscape */ $code; ?>_expiration_yr"
                    name="payment[cc_exp_year]"
                    class="required-entry admin__control-select
                    admin__control-select-year">
                <?php foreach ($block->getCcYears() as $k => $v): ?>
                    <?php
                    $selected = $k === $ccExpYear
                        ? 'selected="selected"'
                        : '';
                    $value = $k ? $block->escapeHtml($k) : '';
                    ?>
                    <option value="<?= /* @noEscape */ $value; ?>"
                            <?= /* @noEscape */ $selected ?>>
                        <?= $block->escapeHtml($v); ?>
                    </option>
                <?php endforeach; ?>
            </select>
        </div>
    </div>

    <div class="admin__field _required">
        <label for="<?= /* @noEscape */ $code; ?>_cc_owner"
               class="admin__field-label">
            <span><?= $block->escapeHtml(__('Name On Card')); ?></span>
        </label>

        <div class="admin__field-control">
            <input type="text" id="<?= /* @noEscape */ $code; ?>_cc_owner"
                   name="payment[cc_owner]"
                   class="input-text required-entry admin__control-text"
                   value="<?= /* @noEscape */ $block->getInfoData('cc_owner'); ?>"/>
        </div>
    </div>

    <?php if ($block->hasVerification()): ?>
        <div class="admin__field _required">
            <label for="<?= /* @noEscape */ $code; ?>_cc_cid"
                   class="admin__field-label">
                <span><?= $block->escapeHtml(__('Card Verification Number')); ?></span>
            </label>

            <div class="admin__field-control">
                <input type="tel"
                       class="required-entry input-text validate-cc-cvn admin__control-text"
                       maxlength="4"
                       id="<?= /* @noEscape */ $code; ?>_cc_cid"
                       name="payment[cc_cid]"
                       value="<?= /* @noEscape */ $block->getInfoData('cc_cid') ?>"/>
            </div>
        </div>
    <?php endif; ?>
</fieldset>
